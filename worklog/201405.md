**20140504**

1. 异步建立 TCP 连接，用 callback 处理错误。
  - 同步连接如果失败，会阻塞大约20秒（超时）才能获得返回值，不适合多设备批量操作。
2. 调整调用关系，不再用任务队列，读到任务后直接异步调用handler处理。
3. 帮助寻找Windows系统上的 split-horizon DNS 解决方案
  - 刘工在做的OA系统需要把一个域名根据用户的网段解析到内/外网不同的IP地址，Windows Server 2008自带的DNS服务不支持这个功能
  - 可以尝试免费软件： BIND

**20140505**

1. 对于 `设置调光模式` 类型的任务，生成一个 frame 并写到 socket
2. 把 `shared_ptr<Task>` 作为参数不断传递给 handler，完成任务后直接丢弃

**20140506**

1. 数据帧的写队列可以不断 push_back 新的待写帧，但是写完一帧后进入等待状态，直到这一帧被回复或是超时。
  - 这样就可以将回复和记录在数据帧中的 pending task 对应上了
  - 超时则在 pending task 中记录超时错误，并继续处理写队列
2. 写数据帧时，如果尚未连接，等待3秒后重试（共）1次。
3. 对收到的数据帧进行解析

**20140507**

1. 更新数据库的sql语句放在 task 中
  - 设置命令：在生成 task 对象时即可设置
  - 查询命令：在收到回复的时候设置
  - 上报及报警：在收到时设置
2. 修正网络通信逻辑中的问题，现在连续执行多个任务正常了
  - 同时执行多个 `async_connect` 会抛 exception
  - 加 `mutex` 避免这种情况
3. 增加如下任务类型的处理：
  - 控制器时间同步

**TODO**

1. 增加更多任务类型的处理
