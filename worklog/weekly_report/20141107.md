# 本周工作记录

20141107

StarRiver进行50控制器+5000灯压力测试，考虑新的数据库设计以满足上周提出的新需求。

## 编码/测试

1. *SR*: 5000灯压力测试
  - 建数据库
  - 虚拟机上装StarRiver Client & Server
  - 虚拟机上配置模拟控制器运行环境
  - 找到两个 slow query，单次查询时间分别为162.44s和17.19s，已尝试优化，运行两天看效果。
2. *SR*: 曾磊的客户端不支持64位Task ID。32位不够用（压力测试环境200多天就能跑到最大的uint32_t）。C++11标准库里有64位整形与字符串的转换。在不升级编译器的情况下，找到一个微软的扩展类型和自定义的函数可以满足需求。
3. *SR*: Server 链接的boost.asio库从1.55.0升级到1.57.0。
  - 更新移除了一些Windows平台下对 deprecated socket api 的使用

## 其他

1. 升级 Redmine 2.5.2 => 2.6.0
2. 升级 GitLab 7.2.1 => 7.4.3

## 近期计划

1. *SR*: 增加服务器工作模式，监听控制器传入连接。
