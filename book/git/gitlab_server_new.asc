[[gitlab_server_new]]
=== GitLab on Ubuntu Server 13.10

This section records steps I went through to setup a GitLab server on Ubuntu Server 13.10.

First of all, get Ubuntu Server running. The installer is pretty straight forward. I chose to install *OpenSSH Server* when prompted to select packages.

The server shall be configured to use a static IP address. Find out what interface is being used with `ifconfig`. Then edit `/etc/network/interfaces`. Suppose `eth0` is the interface in use:

Change

[source,bash]
----
auto eth0
iface eth0 inet dhcp
----

to

[source,bash]
----
auto eth0
iface eth0 inet static
    address 202.11.11.201
    netmask 255.255.0.0
    network 202.11.0.0
    broadcast 202.11.255.255
    gateway 202.11.0.2
----

Specify DNS servers by editing `/etc/resolv.conf`.

[source,bash]
----
name server 202.96.209.5
name server 202.96.209.133
----

Edit `/etc/ssh/sshd_config` to allow remote login over ssh.

Generate a pair of public/private keys on the client machine. Then upload to server for public key authenticaiton.

[source,bash]
----
# on client side
ssh-keygen -t rsa
cd ~/.ssh
sftp qingpei@202.11.11.201
put id_rsa.pub
exit
ssh qingpei@202.11.11.201

# on server side
cd ~/.ssh
cat ../id_rsa.pub >> authorized_keys
rm ../id_rsa.pub
exit

# on client side, this time it won't prompt for password
ssh qingpei@202.11.11.201
----

Remember to allow incoming tcp connections on port 22 in *iptables*.

// TODO iptables config

// TODO public key authentication for ssh

// TODO GitLab installation

// TODO GitLab CI installation
